job_specifications:
- id: benchintel
  tasks:
  - docker_image: gbisbas/devito-intel:v0.9b
    environment_variables:
      DEVITO_ARCH: gcc
      OMP_NUM_THREADS: 8
      DEVITO_OPENMP: 1
      DEVITO_MPI: 1
      DEVITO_LOGGING: 'DEBUG'
    default_working_dir: container
    multi_instance:
      num_instances: pool_current_dedicated
      mpi:
        runtime: intelmpi
        processes_per_node: 1
      pre_execution_command: python3 -c "import mpi4py; print(mpi4py.get_config())"; source /opt/intel/compilers_and_libraries/linux/mpi/bin64/mpivars.sh; which mpirun; which mpiexec;
    command: python3 devito/examples/seismic/tti/tti_example.py


