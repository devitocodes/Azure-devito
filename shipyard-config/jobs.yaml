job_specifications:
- id: bench1
  shared_data_volumes:
  - azureblob_vol
  tasks:
  - docker_image: mloubout/devito-bench:v0.1
    environment_variables:
      DEVITO_ARCH: gcc-8
      OMP_NUM_THREADS: 4
      OMP_PROC_BIND: 'close'
      DEVITO_MPI: 1
      DEVITO_OPENMP: 1
      OMP_PLACES: 'cores'
      DEVITO_LOGGING: 'DEBUG'
    multi_instance:
      num_instances: pool_current_dedicated
      mpi:
        runtime: mpich
        processes_per_node: 2
        options:
          - --bind-to socket
    command: > 
      python3 examples/seismic/tti/tti_example.py -so 12 -k centered